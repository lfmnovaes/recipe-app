<p style="color: green"><%= notice %></p>

<%= render @recipe %>

<% unless @recipe.foods.empty?%>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Quantity</th>
        <th>Price</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @recipe.recipe_foods.where(recipe_id: @recipe.id).each do |r| %>
        <tr>
          <td><%= r.food.name %></td>
          <td><%= r.quantity %></td>
          <td>$ <%= r.food.price%></td>
          <% if can? :manage, r %>
            <td><%= button_to "Remove", food_path(r.food.id), method: :delete %></td>
          <% else %>
            <td> - </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No foods available</p>
<% end %>


<div>
  <%= link_to "Edit this recipe", edit_recipe_path(@recipe) %> |
  <%= link_to "Back to recipes", recipes_path %>

  <%= button_to "Destroy this recipe", @recipe, method: :delete %>
</div>
